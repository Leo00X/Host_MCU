# 智能新风系统主机 - 功能清单

> **版本**: v1.0  
> **更新日期**: 2025-12-09

---

## ✅ 已实现功能

### 核心功能

- [x] **任务调度器** - 基于 SysTick 的非抢占式调度 (9个周期任务)
- [x] **IAQ 智能算法** - 权重指数法空气质量决策
- [x] **全局数据管理** - 统一的系统状态结构 (`SystemData_t`)
- [x] **指令派发中心** - 自动检测状态变化并下发控制指令

### 传感器模块

- [x] **DHT11** - 温湿度监测
- [x] **MQ2** - 烟雾检测
- [x] **MQ5** - 煤气/可燃气体检测
- [x] **PM2.5 (DC01)** - 颗粒物监测

### 通信模块

- [x] **ESP8266 WiFi** - OneNET 云平台连接
- [x] **Zigbee (DL-20/E18)** - 从机无线通信与组网
- [x] **HMI 串口屏** - 本地人机交互 (双向通信)
- [x] **ASR-PRO** - 语音识别控制模块

### IoT 功能

- [x] **MQTT 协议** - 云端数据上报
- [x] **远程监控** - APP 实时查看
- [x] **远程控制** - APP 手动干预
- [x] **云端下行命令** - 接收并执行远程指令

### HMI 双向通信

- [x] **发送数据** - 实时推送传感器数据到屏幕
- [x] **接收指令** - 解析HMI触摸屏的控制命令
- [x] **模式控制** - 支持自动/手动/睡眠模式切换
- [x] **风速调节** - HMI直接控制从机风扇转速

---

## 🚧 开发中 / 计划中

- [ ] 多从机数据融合优化
- [ ] 报警阈值自定义配置 (HMI界面)
- [ ] 数据本地存储与回放
- [ ] E72 Zigbee模块升级

---

## 📋 功能详情

### IAQ 智能决策算法

**输入**: 4 个区域的传感器数据
**输出**: 3 个从机的风扇转速

**决策逻辑**:
1. 归一化各传感器数值 (0-10 分)
2. 加权求和得到 IAQ Score
3. 根据 Score 计算所需转速
4. 取本地需求与全局需求的最大值

### Zigbee 组网

**网络拓扑**: 星型网络
**协调器**: 主机
**终端节点**: 3 个从机

### HMI 界面

**页面列表**:
- 主页 - 系统总览
- 从机 1/2/3 - 各区域详情
- 设置 - 系统配置
- 报警 - 报警历史

---

**更新时间**: 2025-12-09
